<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dashboard STD Andaime</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="wrap" id="dashboardWrap">
    <header>
        <div>
            <h1>STD Dashboard — Andaime</h1>
            <div class="subtitle">Visão diária e semanal de montagem / desmontagem — Padrão STD = 0,22</div>
        </div>
        <div style="text-align:right">
            <div class="tag">STD padrão montagem: 0,22</div>
            <div style="height:6px"></div>
            <div class="mini">Última atualização: <strong>Hoje</strong></div>
        </div>
    </header>

    <!-- Linha 3 - Filtro -->
    <div id="filter-container">
        <label>Data Início: <input type="date" id="dataInicio" /></label>
        <label>Data Fim: <input type="date" id="dataFim" /></label>
        <button id="btnApplyFilter">Aplicar filtro</button>
        <button id="btnExportPDF">Exportar PDF</button>
        <input type="file" id="fileInput" accept=".csv" style="margin-left: auto;">
    </div>

    <!-- Linha 1 - Cards principais -->
    <div class="grid">
        <div class="card kpi"><div class="label">HH Total (h)</div><div class="value" id="hhTotal">0</div></div>
        <div class="card kpi"><div class="label">ML Montados</div><div class="value" id="mlMontados">0 m</div></div>
        <div class="card kpi"><div class="label">Montadores Presentes</div><div class="value" id="montPresente">0</div></div>
        <div class="card kpi"><div class="label">STD Semanal</div><div class="value" id="stdSemanal">0,00</div></div>
        <div class="card kpi"><div class="label">Meta Atingida</div><div class="value" id="metaAtingida">0%</div></div>

        <!-- Linha 2 - Gráfico -->
        <div class="card wide">
            <div style="font-weight:700;margin-bottom:6px;">Tendência semanal — ML montados/dia</div>
            <svg id="graficoLinha" width="100%" height="180" viewBox="0 0 100 35" preserveAspectRatio="none" style="overflow: visible;">
                <g font-size="3" fill="#0b2340" font-weight="600">
                    <text x="0" y="33" text-anchor="start">Seg</text>
                    <text x="16.66" y="33" text-anchor="middle">Ter</text>
                    <text x="33.32" y="33" text-anchor="middle">Qua</text>
                    <text x="49.98" y="33" text-anchor="middle">Qui</text>
                    <text x="66.64" y="33" text-anchor="middle">Sex</text>
                    <text x="83.3" y="33" text-anchor="middle">Sáb</text>
                    <text x="99.96" y="33" text-anchor="end">Dom</text>
                </g>
            </svg>
        </div>

        <!-- Linha 2 - Ranking Top 5 -->
        <div class="card ranking">
            <div style="font-weight:700;margin-bottom:6px;">Ranking Produtividade Top 5</div>
            <table>
                <thead><tr><th>Nome</th><th>% Meta</th><th>Indicador</th></tr></thead>
                <tbody id="rankingBody"><tr><td colspan="3" style="text-align:center;color:var(--gray)">Sem dados</td></tr></tbody>
            </table>
        </div>

        <!-- Linha 4 - Tabela CSV -->
        <div class="card full" style="grid-column:span 12">
            <div style="font-weight:700;margin-bottom:6px;">Dados (amostra)</div>
            <div id="tabelaDadosWrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Semana</th><th>OS</th><th>Matrícula</th><th>Encarregado</th><th>Área</th>
                            <th>Mont.Presente</th><th>HH Total</th><th>ML Montados</th><th>STD Montado</th><th>Data</th>
                        </tr>
                    </thead>
                    <tbody id="tabelaDados"><tr><td colspan="10" style="text-align:center; color: var(--gray);">Importe o CSV para visualizar</td></tr></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script src="script.js"></script>
</body>
</html>

<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Dashboard STD Andaime</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="wrap" id="dashboardWrap">
        <header>
            <h1>STD Dashboard — Andaime</h1>
            <div class="subtitle">Visão diária e semanal de montagem / desmontagem — Padrão STD = 0,22</div>
        </header>

        <!-- Filtro e botões -->
        <div id="filter-container">
            <label>Data Início: <input type="date" id="dataInicio" /></label>
            <label>Data Fim: <input type="date" id="dataFim" /></label>
            <button id="btnApplyFilter">Aplicar filtro</button>
            <button id="btnExportPDF">Exportar PDF</button>
            <button id="btnVoltarMenu">Voltar ao Menu</button>
        </div>

        <!-- Linha 1: Cards principais -->
        <div class="grid linha1">
            <div class="card kpi">
                <div class="label">HH Total (h)</div>
                <div class="value" id="hhTotal">0</div>
            </div>
            <div class="card kpi">
                <div class="card-title">Montadores</div>
                <div class="value" id="montPresente">
                    Mobilizado: 140<br>
                    Média Presente: 96<br>
                    Média Faltas: 25<br>
                    Aguardando Crachá: 19
                </div>
            </div>
            <div class="card kpi">
                <div class="label">ML Montados</div>
                <div class="value" id="mlMontados">0 m</div>
            </div>
            <div class="card kpi">
                <div class="label">STD Geral</div>
                <div class="value" id="stdSemanal">0,00</div>
            </div>
            <div class="card kpi">
                <div class="label">Meta Atingida</div>
                <div class="value" id="metaAtingida">0%</div>
            </div>
        </div>

        <!-- Linha 2: Gráfico e Ranking -->
        <div class="grid linha2">
            <div class="card wide">
                <div class="card-title">Tendência mensal — ML montados / mês</div>
                <svg id="graficoLinha" width="100%" height="160" viewBox="0 0 100 35" preserveAspectRatio="none"></svg>
            </div>
            <div class="card ranking">
                <div class="card-title">Ranking de Produtividade (Top 5)</div>
                <table id="rankingTable">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>% Meta</th>
                            <th>Desempenho</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="3" style="text-align:center; color:gray;">Sem dados</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Linha 3: Tabela de amostra CSV -->
        <div class="grid linha3">
            <div class="card full">
                <div class="card-title">Dados (amostra)</div>
                <div id="tabelaDadosWrapper" class="tabela-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Encarregado</th>
                                <th>Área</th>
                                <th>Mont.Presente</th>
                                <th>HH Total</th>
                                <th>ML Montados</th>
                                <th>STD Montado</th>
                                <th>Data</th>
                            </tr>
                        </thead>
                        <tbody id="tabelaDados">
                            <tr>
                                <td colspan="7" style="text-align:center; color: gray;">Importe o CSV para visualizar</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Upload CSV -->
        <div style="margin-top:16px;">
            <input type="file" id="fileInput" accept=".csv" />
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
